{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/about/about.component.ts","./src/app/about/about.component.html","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/gallery/gallery.component.ts","./src/app/gallery/gallery.component.html","./src/app/helpers/canvas.ts","./src/app/helpers/files.ts","./src/app/image-comparer/image-comparer.component.ts","./src/app/image-comparer/image-comparer.component.html","./src/app/models/FileWithURL.ts","./src/app/panning-canvas/panning-canvas.component.ts","./src/app/panning-canvas/panning-canvas.component.html","./src/app/pipes/bytes.pipe.ts","./src/app/pipes/percent-with-sign.pipe.ts","./src/app/pipes/safe.pipe.ts","./src/app/services/image-compression.service.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-about',\n  templateUrl: './about.component.html',\n  styleUrls: ['./about.component.scss']\n})\nexport class AboutComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"about\">\n  <div class=\"container\">\n    <div class=\"align-content-center mb-5\">\n      <img src=\"assets/about-logo.svg\" width=\"250\" height=\"250\">\n    </div>\n    <p>\n      Desize is a simple application used to shrink the size of your jpeg files. \n      Itâ€™s great for web developers looking to improve website performance by optimizing their images, or for photographers looking to better manage the size of their image archive.\n    </p>\n  \n    <p>\n      All the compression is done locally with JavaScript, so no user data is sent over the internet for better data usage and security.\n      Desize is designed with productive workflow in mind, so you can customize the compression for different images in your library at the same time.\n      You can either apply a quality setting to all images at once to get results quickly, or you can go into each image individually and customize the compression to your liking with the Before and After feature.\n    </p>\n  </div>\n</div>","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { GalleryComponent } from './gallery/gallery.component';\nimport { ImageComparerComponent } from './image-comparer/image-comparer.component';\nimport { AboutComponent } from './about/about.component';\n\nconst routes: Routes = [\n  { path: 'about', component: AboutComponent },\n  { path: 'edit/:id', component: ImageComparerComponent },\n  { path: '', component: GalleryComponent, pathMatch: 'full'}\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'desize';\n}\n","<nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n  <div class=\"container-fluid\">\n    <a class=\"navbar-brand\" [routerLink]=\"'/'\"><img src=\"assets/desize-logo.svg\" width=\"30\" height=\"30\"></a>\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavAltMarkup\" aria-controls=\"navbarNavAltMarkup\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n      <span class=\"navbar-toggler-icon\"></span>\n    </button>\n    <div class=\"collapse navbar-collapse\" id=\"navbarNavAltMarkup\">\n      <div class=\"navbar-nav ml-auto\">\n        <a class=\"nav-link mr-2\" [routerLink]=\"'/about'\">About</a>\n        <a class=\"nav-link mr-2\" href=\"https://github.com/Gordon-Yeh/image-desize\"><i class=\"fab fa-github\"></i></a>\n      </div>\n    </div>\n  </div>\n</nav>\n<router-outlet></router-outlet>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { ImageComparerComponent } from './image-comparer/image-comparer.component';\nimport { PercentWithSignPipe } from './pipes/percent-with-sign.pipe';\nimport { BytesPipe } from './pipes/bytes.pipe';\nimport { GalleryComponent } from './gallery/gallery.component';\nimport { SafePipe } from './pipes/safe.pipe';\nimport { AboutComponent } from './about/about.component';\nimport { PanningCanvasComponent } from './panning-canvas/panning-canvas.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ImageComparerComponent,\n    PercentWithSignPipe,\n    BytesPipe,\n    GalleryComponent,\n    SafePipe,\n    AboutComponent,\n    PanningCanvasComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport FileWithURL from '../models/FileWithURL';\nimport { ImageCompressionService } from '../services/image-compression.service';\nimport * as JSZip from 'jszip';\nimport { download } from '../helpers/files';\n\nconst DOUBLECLICK_THRESHHOLD = 200;\n\n@Component({\n  selector: 'app-gallery',\n  templateUrl: './gallery.component.html',\n  styleUrls: ['./gallery.component.scss']\n})\nexport class GalleryComponent implements OnInit {\n  selected = {};\n  quality = 100;\n  busy = false;\n\n  constructor(\n    public imgService: ImageCompressionService,\n    private route: Router,\n  ) {\n    console.log('gallery.component constructor');\n  }\n\n  handleApplyQuality() {\n    if (this.busy)\n      return;\n\n    this.busy = true;\n    let imgsToApply = this.selectedImgs;\n    imgsToApply.map(id => this.imgService.compressImg(id, this.quality));\n    Promise.all(imgsToApply)\n      .then(() => {\n        this.busy = false;\n      });\n  }\n\n  handleImgFrameClick(e: MouseEvent, imgId: number) {\n    console.log('handleImgFrameClick:', imgId);\n    e.stopPropagation();\n\n    if (e.shiftKey) {\n      console.log('clicked when shifted')\n      // shift logic here\n      let selectedImg = Object.keys(this.selected);\n      let first = Number(selectedImg[0]);\n      let last = Number(selectedImg[selectedImg.length-1]);\n      this.allImgs.forEach(id => {\n        if ((imgId < first && id < first && id > imgId) ||\n          (imgId > last && id > last && id < imgId)) {\n            console.log('selected id', id)\n            this.selected[id] = true;\n        }\n      });\n    } else if (!e.ctrlKey) {\n      this.selected = {};\n    }\n\n    this.selected[imgId] = true;\n  }\n\n  handleSelectAll(e: MouseEvent) {\n    e.stopPropagation();\n    this.allImgs.forEach(id => {\n      this.selected[id] = true;\n    });\n  }\n\n  handleImgFrameDoubleClick(e: Event, imgId: number) {\n    e.stopPropagation();\n    this.selected = {};\n    this.route.navigateByUrl('/edit/' + imgId);\n  }\n\n  handleDeselectClick() {\n    console.log('deslecting all images');\n    this.selected = {};\n  }\n\n  handleFileSelect() {\n    const input = document.getElementById('fileselector') as HTMLInputElement;\n    if (input.files.length < 1)\n      return;\n\n    for (let i = 0; i < input.files.length; i++) {\n      let file = input.files[i];\n      if (file.type == 'image/jpeg' || file.type == 'image/png' || file.type == 'image/tiff')\n        this.imgService.addImg(input.files[i]);\n    }\n  }\n\n  handleDownload(imgIds: number[]) {\n    let zip = new JSZip();\n    imgIds\n      .forEach(id => {\n        let img = this.imgService.getImg(id);\n        zip.file(img.original.f.name, img.compressed.f);\n      });\n    zip.generateAsync({type:\"blob\"})\n      .then((content) => {\n        download(content, 'desized.zip');\n      });\n  }\n\n  get selectedImgs() : number[] {\n    return Object.keys(this.selected).map(id => Number(id));\n  }\n\n  get allImgs() : number[] {\n    return this.imgService.getImgIds();\n  }\n\n  get selectedCount():number {\n    return Object.keys(this.selected).length;\n  }\n\n  get fileReductionPercentage():number {\n    let imgSet = this.selectedCount > 0 ? this.selectedImgs : this.allImgs;\n    let cSize = this.aggrigateFileSize(imgSet, 'compressed');\n    let oSize = this.aggrigateFileSize(imgSet, 'original');\n    return oSize > 0 ? (cSize-oSize)/oSize : 0;\n  }\n\n  get fileOutputSize():number {\n    let imgSet = this.selectedCount > 0 ? this.selectedImgs : this.allImgs;\n    return this.aggrigateFileSize(imgSet, 'compressed');\n  }\n\n  aggrigateFileSize(ids : number[], version : 'original' | 'compressed') {\n    return ids.map(id => this.imgService.getImg(id)[version].f.size).reduce((accu, s) => {\n      return accu + s;\n    }, 0);\n  };\n\n  ngOnInit(): void {\n    console.log('gallery.component OnInit');\n  }\n}\n","<div class=\"gallery-container\">\n  <div class=\"row\">\n    <div class=\"col-12 col-md-3 mb-2\">\n      <div class=\"form-file form-file-sm\">\n        <input id=\"fileselector\" (input)=\"handleFileSelect()\" type=\"file\" class=\"form-file-input\" multiple #fileselector>\n        <label class=\"form-file-label\" for=\"customFileLg\">\n          <span class=\"form-file-text\">Choose file...</span>\n          <span class=\"form-file-button\">Browse</span>\n        </label>\n      </div>\n    </div>\n\n    <div class=\"col-8 col-md-2 mb-2\">\n      <div class=\"input-group input-group-sm\">\n        <span class=\"input-group-text\" id=\"inputGroup-sizing-sm\">Quality:</span>\n        <input [(ngModel)]=\"quality\" type=\"number\" class=\"form-control\" aria-label=\"quality\" min=\"0\" max=\"100\">\n        <button type=\"button\" (click)=\"handleApplyQuality()\" class=\"btn btn-outline-secondary\">Apply</button>\n      </div>\n    </div>\n\n    <div class=\"col-4 col-md-3 mb-2\">\n      <div class=\"input-group input-group-sm\">\n        <button type=\"button\" (click)=\"handleSelectAll($event)\" class=\"btn btn-outline-secondary\">Select All</button>\n      </div>\n    </div>\n  </div>\n\n\n\n  <!-- FIXME: Vulnerable to XSS, if user selects a malicious file containing a script -->\n  <div class=\"img-container\" (click)=\"handleDeselectClick()\">\n    <div\n      *ngFor=\"let item of imgService.getImgs() | keyvalue\"\n      class=\"img-frame\"\n      [attr.data-id]=\"item.key\"\n      [class.selected]=\"selected[item.key]\"\n      [style.background-image]=\"'url(' + item.value.original.url + ')'\"\n      (click)=\"handleImgFrameClick($event, item.key)\"\n      (dblclick)=\"handleImgFrameDoubleClick($event, item.key)\"\n    >\n      <div class=\"attribute-label\">\n        <span class=\"mr-3\"><b>Quality</b>: {{ item.value.quality/100 | percent }}</span>\n        <span><b>Output Size</b>: {{ item.value.compressed.f.size | bytes }}</span>\n      </div>\n      <span class=\"mobile-edit\" (touchstart)=\"handleImgFrameDoubleClick($event, item.key)\"><i class=\"fas fa-edit\" width=\"45px\" height=\"45px\"></i></span>\n    </div>\n  </div>\n</div>\n\n<div class=\"bottom-bar\">\n  <div class=\"row justify-content-md-end\">\n    <div class=\"col-6 col-md-3 col-lg-2 mt-auto mb-auto\">{{ selectedCount }} selected</div>\n    <div class=\"col-6 col-md-3 col-lg-2 mt-auto mb-auto\">\n      <b>Size:</b> {{ fileOutputSize | bytes }}\n      <span\n        [class.red]=\"fileReductionPercentage > 0\"\n        [class.green]=\"fileReductionPercentage < 0\"\n      >\n        ({{ fileReductionPercentage | percentWithSign }})\n      </span>\n    </div>\n    <div class=\"col-12 col-md-3 col-lg-2\">\n      <button (click)=\"handleDownload(selectedImgs)\" type=\"button\" class=\"btn btn-primary\">\n        Download\n      </button>\n    </div>\n    <!-- DOWNLOAD ALL -->\n  </div>\n</div>","function getInnerWidth(e : HTMLElement) : number {\n  var styles = window.getComputedStyle(e);\n  var padding = parseFloat(styles.paddingLeft) +\n    parseFloat(styles.paddingRight);\n  return e.clientWidth - padding;\n}\n\nexport function drawImage(canvas:HTMLCanvasElement, url:string, width:number=null, height:number=null) : Promise<void> {\n  console.log(`drawing ${url} to ${canvas}`)\n  return new Promise((resolve, reject) => {\n    let img = new Image();\n    img.src = url;\n\n    img.onload = function() {\n      // if (resize) {\n      //   // set canvas to width for the parents element (not including padding/margin)\n      //   var dWidth = getInnerWidth(canvas.parentElement);\n      //   var dHeight = dWidth / img.width * img.height;\n      //   // image should not exceed a portion of the screen\n      //   if (dHeight > window.innerHeight * 0.8) {\n      //     dHeight = window.innerHeight * 0.8;\n      //     dWidth = dHeight / img.height * img.width;\n      //   }\n      // } else {\n      //   var dWidth = img.width;\n      //   var dHeight = img.height;\n      // }\n      let dWidth = width !== null ? width : img.width;\n      let dHight = height !== null ? height : img.height;\n      canvas.width = dWidth;\n      canvas.height = dHight;\n      \n      var ctx = canvas.getContext('2d');\n      ctx.drawImage(img,\n        0, 0,\n        img.width, img.height,\n        0, 0,\n        dWidth, dHight\n      );\n\n      resolve();\n    }\n  });\n}\n\nexport function toJPEG(canvas:HTMLCanvasElement, quality:number) : Promise<Blob> {\n  return new Promise((resolve, reject) => {\n    if (quality < 0 || quality > 100)\n      reject(new Error(`jpeg quality should be between 0 to 100, got ${quality}`));\n\n    canvas.toBlob(resolve, 'image/jpeg', quality/100);\n  })\n}","export function download(content, outputName : string) {\n  var a = document.createElement('a');\n  a.download = outputName;\n  let url = URL.createObjectURL(content);\n  a.href = url;\n  a.click();\n  a.remove();\n  URL.revokeObjectURL(url);\n}","import { Component, OnInit, AfterViewInit, ChangeDetectorRef, ViewChild } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ImageCompressionService } from '../services/image-compression.service';\nimport { drawImage } from '../helpers/canvas';\nimport { PanningCanvasComponent } from '../panning-canvas/panning-canvas.component';\n\ntype View = 'compare' | 'output';\n@Component({\n  selector: 'image-comparer',\n  templateUrl: 'image-comparer.component.html',\n  styleUrls: ['./image-comparer.component.scss']\n})\nexport class ImageComparerComponent implements OnInit, AfterViewInit {\n  @ViewChild('singleview') singleViewCanvas:PanningCanvasComponent;\n  @ViewChild('beforeview') beforeViewCanvas:PanningCanvasComponent;\n  @ViewChild('afterview') afterViewCanvas:PanningCanvasComponent;\n  /* control fields */\n  quality = 85;\n  outputNameField = 'output';\n  viewMode : View = 'compare';\n  imageInfo : any;\n  imgId: number;\n  /* HTML Elements */\n  compareXCanvas : HTMLCanvasElement;\n  compareYCanvas : HTMLCanvasElement;\n  YCanvas : HTMLCanvasElement;\n  win = window;\n\n  constructor(\n    private route: ActivatedRoute,\n    private ref: ChangeDetectorRef,\n    public imgService: ImageCompressionService\n  ) { }\n\n  getOGFileSize() : number {\n    return this.imageInfo ? this.imageInfo.original.f.size : -1;\n  }\n\n  getCPFileSize() : number {\n    return this.imageInfo ? this.imageInfo.compressed.f.size : -1;\n  }\n\n  getFileDifference() : number {\n    return (this.imageInfo.compressed.f.size - this.imageInfo.original.f.size) / this.imageInfo.original.f.size;\n  }\n\n  getCurrentViewModel() : View {\n    return this.viewMode;\n  }\n\n  selectedImg() : boolean {\n    return this.imageInfo != undefined;\n  }\n\n  drawView() {\n    console.log('drawView');\n    if (!this.imageInfo)\n      return;\n\n    switch (this.viewMode) {\n      case 'compare':\n        this.beforeViewCanvas.redraw(this.imageInfo.original.url);\n        this.afterViewCanvas.redraw(this.imageInfo.compressed.url);\n      case 'output':\n        this.singleViewCanvas.redraw(this.imageInfo.compressed.url);\n    }\n  }\n\n  handleDownload() {\n    var a = document.createElement('a');\n    a.download = this.outputNameField + '.jpeg';\n    a.href = this.imageInfo.compressed.url;\n    a.click();\n    a.remove();\n  }\n\n  handleQualityChange() {\n    this.imgService.compressImg(this.imageInfo.imgId, this.quality)\n      .then((info) => {\n        this.imageInfo = info;\n        this.drawView();\n      })\n  }\n\n  handleViewChange(mode : View) {\n    console.log('handleViewChange');\n    if (mode === this.viewMode) {\n      return;\n    }\n    this.viewMode = mode;\n    this.drawView();\n  }\n\n  handleChangeImg(orderReversed=false) {\n    this.imgId = this.imgService.getNextImg(this.imgId, orderReversed);\n    this.imageInfo = this.imgService.getImg(this.imgId);\n    this.outputNameField = `${this.imageInfo.original.f.name.split('.')[0]}-compressed`;\n    this.quality = this.imageInfo.quality;\n    this.drawView();\n  }\n\n  imgFileSelectHandler() {\n    var fileInput = document.getElementById('file-selector') as HTMLFormElement;\n    var file : File = fileInput.files[0];\n    console.log(file);\n    if (file.type !== 'image/jpeg') {\n      alert(`${file.name} is not a JPEG file`);\n      return;\n    }\n    this.imageInfo = this.imgService.addImg(file);\n    this.outputNameField = `${file.name.split('.')[0]}-compressed`;\n    this.drawView();\n  }\n\n  ngOnInit() {\n    // resize images appropriately if view size changes\n    window.addEventListener('resize', () => {\n      this.drawView();\n    });\n    this.imgId = +this.route.snapshot.paramMap.get('id');\n    this.imageInfo = this.imgService.getImg(this.imgId);\n    console.log('imginfo', this.imageInfo)\n    this.outputNameField = `${this.imageInfo.original.f.name.split('.')[0]}-compressed`;\n    this.quality = this.imageInfo.quality;\n  }\n\n  ngAfterViewInit() {\n    // we do this here instead of ngOnInit() because ViewChild aren't guarentee to be populated at that time\n    // reference: https://blog.angular-university.io/angular-viewchild/\n    this.drawView();\n    this.beforeViewCanvas.onPan = (x, y) => { this.afterViewCanvas.move(x, y) };\n    this.afterViewCanvas.onPan = (x, y) => { this.beforeViewCanvas.move(x, y) };\n  }\n}","\n<div class=\"edit-container\">\n  <!-- View Dropdown Select-->\n  <div class=\"view-selection dropdown\">\n    <button class=\"btn btn-lg dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-expanded=\"false\">\n      {{ \n        {\n          'compare': 'Compare View',\n          'output': 'Output View'\n        }[viewMode]\n      }}\n    </button>\n    <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n      <li><a class=\"dropdown-item\" (click)=\"handleViewChange('compare')\">Compare View</a></li>\n      <li><a class=\"dropdown-item\" (click)=\"handleViewChange('output')\">Output View</a></li>\n    </ul>\n  </div>\n\n  <div class=\"image-comparer-container\" [hidden]=\"getCurrentViewModel() !== 'output'\">\n    <!-- View Container Wrapper -->\n    <app-panning-canvas #singleview\n      [maxWidth]=\"win.outerWidth\"\n      [maxHeight]=\"win.outerHeight*5/6\">\n    ></app-panning-canvas>\n  </div>\n      <!-- Y View Components -->\n  <div class=\"image-comparer-container\" [hidden]=\"getCurrentViewModel() !== 'compare'\">\n    <div class=\"compare-view-partition\">\n      <!-- Compare View Components -->\n      <app-panning-canvas #beforeview\n        [maxWidth]=\"win.outerWidth/2-1\"\n        [maxHeight]=\"win.outerHeight*5/6\">\n      ></app-panning-canvas>\n    </div>\n\n    <div class=\"compare-view-partition\">\n      <!-- Compare View Components -->\n      <app-panning-canvas #afterview\n        [maxWidth]=\"win.outerWidth/2-1\"\n        [maxHeight]=\"win.outerHeight*5/6\">\n      </app-panning-canvas>\n    </div>\n\n    <div class=\"vertical-split-line overflow-hidden\"></div>\n    <!-- Compare View Components -->\n  </div>\n  <canvas id=\"input-canvas\" hidden></canvas>\n\n  <!-- CONTROL BAR -->\n  <div class=\"control-bar\">\n    <!-- FILE SIZE DISPLAY -->\n    <div class=\"control-bar-row align-content-center\">\n      <div #prevImgBtn\n        (click)=\"handleChangeImg(true)\"\n        [hidden]=\"imgService.isFirstImg(imgId)\"\n        class=\"next-btn mr-2\">\n        <i class=\"fas fa-arrow-alt-circle-left\"></i>\n      </div>\n\n      <span\n        class=\"pop-up\"\n        [class.red]=\"getFileDifference() > 0\"\n        [class.green]=\"getFileDifference() < 0\"\n      >\n        {{ getCPFileSize() | bytes }} / {{ getOGFileSize() | bytes }} ({{ getFileDifference() | percentWithSign }})\n      </span>\n\n      <div #nextImgBtn\n        (click)=\"handleChangeImg()\"\n        [hidden]=\"imgService.isLastImg(imgId)\"\n        class=\"next-btn ml-2\">\n        <i class=\"fas fa-arrow-alt-circle-right\"></i>\n      </div>\n    </div>\n    <!-- JPEG QUALITY CONTROL -->\n    <div class=\"control-bar-row quality-selector input-group\">\n      <input [(ngModel)]=\"quality\" (change)=\"handleQualityChange()\" type=\"range\" class=\"form-range\" min=\"0\" max=\"100\" id=\"quality\">\n      <input [(ngModel)]=\"quality\" (change)=\"handleQualityChange()\" type=\"number\" class=\"form-control\" min=\"0\" max=\"100\" id=\"quality\">\n      <span class=\"input-group-text\">%</span>\n    </div>\n  </div>\n\n</div>","export default class FileWithURL {\n  #f: File;\n  #url: string;\n\n  constructor(f: File) {\n    this.#f = f;\n    this.#url = URL.createObjectURL(f);\n  }\n\n  get url() {\n    return this.#url;\n  }\n\n  get f() {\n    return this.#f;\n  }\n\n  release() {\n    URL.revokeObjectURL(this.#url);\n  }\n}","import { Component, OnInit, ViewChild, Input, ElementRef } from '@angular/core';\nimport { drawImage } from '../helpers/canvas';\n\n@Component({\n  selector: 'app-panning-canvas',\n  templateUrl: './panning-canvas.component.html',\n  styleUrls: ['./panning-canvas.component.scss']\n})\nexport class PanningCanvasComponent implements OnInit {\n  @ViewChild('mycanvas') canv : ElementRef;\n  @ViewChild('canvwindow') canvWindow : ElementRef;\n  @Input('maxHeight') maxHeight:number = 0;\n  @Input('maxWidth') maxWidth:number = 0;\n  winHeight = 0;\n  winWidth = 0;\n  xoffset = 0;\n  yoffset = 0;\n  prevTouchX = 0;\n  prevTouchY = 0;\n  mouseHeld:boolean = false;\n  mouseTarget:EventTarget;\n  panTarget:EventTarget;\n  onPan:Function;\n\n  constructor() {\n  }\n\n  async redraw(img:string) {\n    await drawImage(this.canv.nativeElement, img);\n    console.log('canv.height:', this.canv.nativeElement.height, 'maxHeight:', this.maxHeight)\n    console.log('canv.width:', this.canv.nativeElement.width, 'maxWidth:', this.maxWidth)\n    this.winHeight = Math.min(this.canv.nativeElement.height, this.maxHeight);\n    this.winWidth = Math.min(this.canv.nativeElement.width, this.maxWidth);\n    console.log('winHeight', this.winHeight)\n    console.log('winWidth', this.winWidth)\n  }\n\n  resizeWindow(width:number, height:number) {\n    this.winWidth = width;\n    this.winHeight = height;\n  }\n\n  move(x:number, y:number) {\n    let maxScrollX = this.canvWindow.nativeElement.scrollWidth - this.canvWindow.nativeElement.clientWidth;\n    let maxScrollY = this.canvWindow.nativeElement.scrollHeight - this.canvWindow.nativeElement.clientHeight;\n    this.xoffset -= x;\n    this.xoffset = this.xoffset > maxScrollX ? maxScrollX : this.xoffset;\n    this.xoffset = this.xoffset < 0 ? 0 : this.xoffset;\n    this.yoffset -= y;\n    this.yoffset = this.yoffset > maxScrollY ? maxScrollY : this.yoffset;\n    this.yoffset = this.yoffset < 0 ? 0 : this.yoffset;\n    this.canvWindow.nativeElement.scroll(this.xoffset, this.yoffset);\n  }\n\n  handleMouseDown(e:MouseEvent) {\n    this.mouseHeld = true;\n    this.panTarget = e.target;\n  }\n\n  handleMouseMove(e:MouseEvent) {\n    if (e.target == this.panTarget && this.mouseHeld) {\n      this.move(e.movementX, e.movementY);\n      if (this.onPan)\n        this.onPan(e.movementX, e.movementY);\n    }\n  }\n\n  handleMouseUp() {\n    this.mouseHeld = false;\n  }\n\n  handleScroll(e:WheelEvent) {\n    e.preventDefault();\n  }\n\n  handleTouchStart(e:TouchEvent) {\n    if (e.touches.length === 1) {\n      let touch = e.touches.item(0);\n      this.prevTouchX = touch.screenX;\n      this.prevTouchY = touch.screenY;\n    }\n  }\n\n  handleTouchMove(e:TouchEvent) {\n    e.preventDefault();\n    if (e.touches.length === 1) {\n      let touch = e.touches.item(0);\n      let dx = touch.screenX-this.prevTouchX;\n      let dy = touch.screenY-this.prevTouchY;\n      this.move(dx, dy)\n      if (this.onPan)\n        this.onPan(dx, dy);\n      this.prevTouchX = touch.screenX;\n      this.prevTouchY = touch.screenY;\n    }\n  }\n\n  ngOnInit(): void {\n  }\n}\n","<div class=\"window\" #canvwindow\n  [style.height]=\"winHeight+'px'\"\n  [style.width]=\"winWidth+'px'\"\n  (mouseup)=\"handleMouseUp()\"\n  (mousedown)=\"handleMouseDown($event)\"\n  (mousemove)=\"handleMouseMove($event)\"\n  (touchstart)=\"handleTouchStart($event)\"\n  (touchmove)=\"handleTouchMove($event)\"\n  (wheel)=\"handleScroll($event)\"\n>\n  <canvas #mycanvas>\n  </canvas>\n</div>\n","import { Pipe, PipeTransform } from '@angular/core';\n\ntype FileSizeUnit = 'B' | 'KB' | 'MB' | 'GB';\nvar denom = {\n  'GB': 1_000_000_000,\n  'MB': 1_000_000,\n  'KB': 1_000,\n  'B': 1\n};\n\n@Pipe({\n  name: 'bytes'\n})\nexport class BytesPipe implements PipeTransform {\n  transform(value: number, unit: FileSizeUnit = null, numDecimals=2): unknown {\n    if (unit === null) {\n      if (value > 1) {\n        let maxUnit = 0;\n        for (const u in denom) {\n          if (value > (denom[u] / 2) && denom[u] > maxUnit) {\n            unit = u as FileSizeUnit;\n            maxUnit = denom[u];\n          }\n        }\n      } else {\n        unit = 'B';\n      }\n    }\n    let sizeInUnit = value / denom[unit];\n    return `${sizeInUnit.toFixed(numDecimals)} ${unit}`;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { PercentPipe } from '@angular/common';\n\n@Pipe({\n  name: 'percentWithSign'\n})\nexport class PercentWithSignPipe implements PipeTransform {\n  transform(value: number): unknown {\n    let pipe = new PercentPipe('en-US');\n    return (value >= 0 ? '+' : '') + pipe.transform(value);\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'safe'\n})\nexport class SafePipe implements PipeTransform {\n  constructor(private sanitizer: DomSanitizer) { }\n\n  transform(url) {\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url);\n  }\n\n}","import { Injectable } from '@angular/core';\nimport FileWithURL from '../models/FileWithURL';\nimport { drawImage, toJPEG } from '../helpers/canvas';\n\ninterface ImgInfo {\n  imgId: number;\n  original: FileWithURL;\n  compressed: FileWithURL;\n  quality: number;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ImageCompressionService {\n  images: { [key: number]: ImgInfo; } = {};\n  idCounter = 0;\n  firstImg = 1;\n  lastImg = 1;\n\n  constructor() { }\n\n  addImg(img: File): ImgInfo {\n    this.idCounter++;\n    this.lastImg = this.idCounter;\n    return this.images[this.idCounter] = {\n      'imgId': this.idCounter,\n      'original': new FileWithURL(img),\n      'compressed': new FileWithURL(img),\n      'quality': 100\n    }\n  }\n\n  getImgIds(): number[] {\n    return Object.keys(this.images).map(k => Number(k));\n  }\n\n  getImgs(): { [key: number]: ImgInfo; } {\n    return this.images;\n  }\n\n  getImgCount(): number {\n    return this.idCounter;\n  }\n\n  getImg(id: number): ImgInfo {\n    return this.images[id];\n  }\n\n  // get the next in order of ascending img id\n  // will wrap around to the first img once the end is reached \n  getNextImg(id: number, reverse=false): number {\n    let incre = reverse ? -1 : 1;\n    // step forward from the given id, until a image is found\n    let i = id;\n    do {\n      i = (i+incre) % (this.idCounter+1);\n      if (i == 0)\n        i = this.idCounter;\n      if (this.images.hasOwnProperty(i))\n        return i;\n    } while (i != id);\n\n    return id;\n  }\n\n  isFirstImg(id: number) : boolean {\n    return this.firstImg == id;\n  }\n\n  isLastImg(id: number) : boolean {\n    return this.lastImg == id;\n  }\n\n  compressImg(imgId: number, quality: number) : Promise<ImgInfo> {\n    let img = this.images[imgId];\n    let canvas = document.createElement('canvas') as HTMLCanvasElement;\n    return drawImage(canvas, img.original.url)\n      .then(() => {\n        return toJPEG(canvas, quality);\n      })\n      .then((b : Blob) => {\n        img.compressed.release();\n        img.compressed = new FileWithURL(b as File);\n        img.quality = quality;\n        return img;\n      })\n      .catch(e => {\n        throw e;\n      });\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}